# –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å SMTP

## üö® –û—à–∏–±–∫–∞: "Bad sequence of commands. The server response was: 5.5.4 Error: send AUTH command first"

### –ü—Ä–∏—á–∏–Ω–∞
SMTP —Å–µ—Ä–≤–µ—Ä —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∫–æ–º–∞–Ω–¥—ã MAIL FROM. –≠—Ç–æ —Ç–∏–ø–∏—á–Ω–æ –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø–æ—á—Ç–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.

### ‚úÖ –†–µ—à–µ–Ω–∏—è

#### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–æ—á—Ç—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `appsettings.json` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–Ω—ã:
```json
{
  "EmailSettings": {
    "SmtpServer": "smtp.office365.com",  // –∏–ª–∏ –≤–∞—à –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    "SmtpPort": 587,
    "Username": "your-email@company.com",
    "Password": "YOUR_APP_PASSWORD",      // –ù–ï –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å!
    "FromEmail": "your-email@company.com",
    "ToEmail": "your-email@company.com",
    "EnableSsl": true,
    "UseDefaultCredentials": false
  }
}
```

#### 2. –°–æ–∑–¥–∞–π—Ç–µ App Password

**–î–ª—è Microsoft 365/Office 365:**
1. –í–æ–π–¥–∏—Ç–µ –≤ https://account.microsoft.com/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" ‚Üí "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
3. –í–∫–ª—é—á–∏—Ç–µ "–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è"
4. –°–æ–∑–¥–∞–π—Ç–µ "–ü–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

**–î–ª—è Google Workspace:**
1. –í–æ–π–¥–∏—Ç–µ –≤ https://myaccount.google.com/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" ‚Üí "–ü–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å

#### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SMTP —Å–µ—Ä–≤–µ—Ä

**Microsoft 365:**
- SmtpServer: `smtp.office365.com`
- Port: `587`
- SSL: `true`

**Google Workspace:**
- SmtpServer: `smtp.gmail.com`
- Port: `587`
- SSL: `true`

**Yandex:**
- SmtpServer: `smtp.yandex.ru`
- Port: `587`
- SSL: `true`

#### 4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä—Ç—ã

–ï—Å–ª–∏ –ø–æ—Ä—Ç 587 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
- Port: `465` (SSL)
- Port: `25` (–±–µ–∑ SSL)

#### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞ –ø–æ—Ä—Ç—ã 587, 465, 25 —Ä–∞–∑—Ä–µ—à–µ–Ω—ã.

### üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 1. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ Swagger
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ API
2. –û—Ç–∫—Ä–æ–π—Ç–µ https://localhost:7059/swagger
3. –ù–∞–π–¥–∏—Ç–µ endpoint `/api/contact`
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

#### 2. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ WASM –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ä–º—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ API

### üìã –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è App Password (–Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å)
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π SMTP —Å–µ—Ä–≤–µ—Ä
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç (587, 465, –∏–ª–∏ 25)
- [ ] SSL –≤–∫–ª—é—á–µ–Ω (–¥–ª—è –ø–æ—Ä—Ç–æ–≤ 587 –∏ 465)
- [ ] –ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- [ ] –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞
- [ ] Email –∞–¥—Ä–µ—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω

### üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

#### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π EmailService
–ó–∞–º–µ–Ω–∏—Ç–µ –≤ `Program.cs`:
```csharp
// –í–º–µ—Å—Ç–æ
builder.Services.AddScoped<IEmailService, EmailService>();

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ
builder.Services.AddScoped<IEmailService, EmailServiceAlternative>();
```

#### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
–í –∫–æ–Ω—Å–æ–ª–∏ API –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:
```
Email —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –æ—Ç Test –Ω–∞ your-email@company.com (–ø–æ—Ä—Ç: 587, SSL: True)
```

#### 3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ IT –æ—Ç–¥–µ–ª—É
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–æ—á—Ç—É, –≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã
- VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫:
1. IT –æ—Ç–¥–µ–ª—É –∫–æ–º–ø–∞–Ω–∏–∏ (–¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–æ—á—Ç—ã)
2. –ü–æ–¥–¥–µ—Ä–∂–∫–µ –ø–æ—á—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
3. –°–∏—Å—Ç–µ–º–Ω–æ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

### üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ API
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É
